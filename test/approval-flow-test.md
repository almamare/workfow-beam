# ๐งช ุณูุฑุจุช ุงุฎุชุจุงุฑ ุณุฑูุน - Approval Flow Test

## โก ุงุฎุชุจุงุฑ ุณุฑูุน (10 ุฏูุงุฆู)

### ุงููุชุทูุจุงุช:
- โ ุญุณุงุจุงุช ุงูุงุฎุชุจุงุฑ ุฌุงูุฒุฉ
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ
- โ Frontend ู Backend ูุนููุงู

---

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน

### 1๏ธโฃ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ (2 ุฏูููุฉ)

```bash
# ุณุฌูู ุฏุฎูู ุจุญุณุงุจ ุงูููุธู
Username: saad
Password: 102030
```

**ุงูุฅุฌุฑุงุกุงุช**:
1. ุงุฐูุจ ุฅูู: `http://localhost:3000/clients/create`
2. ุงููุฃ ุงูุจูุงูุงุช:
   - Name: `QA Test Client - ${Date.now()}`
   - State: `Riyadh`
   - City: `Riyadh`
   - Budget: `10000`
   - Client Type: `Government`
   - Request Notes: `Quick test`
3. ุงุถุบุท "Create Client"

**ุงูุชุญูู**:
- [ ] ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ
- [ ] ุงูุทูุจ ูุธูุฑ ูู `/requests/clients` ุจุญุงูุฉ `Pending`

**ุชุณุฌูู ุงููุชุงุฆุฌ**:
```
Request Code: REQ-XXXXX
Request ID: xxxxx
Created By: saad (a5a114c97438db3a)
Status: Pending
```

---

### 2๏ธโฃ ุงูููุงููุฉ ูู ูุฏูุฑ ุงูุนููุฏ (2 ุฏูููุฉ)

```bash
# ุณุฌูู ุฎุฑูุฌ ูุณุฌูู ุฏุฎูู ุจุญุณุงุจ ูุฏูุฑ ุงูุนููุฏ
Username: salem
Password: 102030
```

**ุงูุฅุฌุฑุงุกุงุช**:
1. ุงุฐูุจ ุฅูู: `http://localhost:3000/approvals/pending`
2. ุงุจุญุซ ุนู ุงูุทูุจ ุงูุฐู ุฃูุดุฃุชู
3. ุงุถุบุท "ููุงูู"
4. ุงููุฃ ุงูููุงุช: `Approved by Contracts Manager - Test`
5. ุงุถุบุท "ุชุฃููุฏ ุงูููุงููุฉ"

**ุงูุชุญูู**:
- [ ] ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ
- [ ] ุงูุทูุจ ูุฎุชูู ูู ูุงุฆูุฉ ุงูููุงููุงุช ุงููุนููุฉ
- [ ] ูู ุตูุญุฉ ุงูุชูุงุตูู: approval ุฌุฏูุฏ ุจุญุงูุฉ `Approved`

**ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
```sql
SELECT created_id, status FROM tasks_requests WHERE request_code = 'REQ-XXXXX';
-- ุงููุชููุน: created_id = '8c063a0a198c4a5a' (ali)
```

**ุชุณุฌูู ุงููุชุงุฆุฌ**:
```
โ Approval created: Approved
โ created_id changed to: ali (8c063a0a198c4a5a)
```

---

### 3๏ธโฃ ุงูููุงููุฉ ูู ูุฏูุฑ ุงููุงููุฉ (2 ุฏูููุฉ)

```bash
# ุณุฌูู ุฎุฑูุฌ ูุณุฌูู ุฏุฎูู ุจุญุณุงุจ ูุฏูุฑ ุงููุงููุฉ
Username: ali
Password: 102030
```

**ุงูุฅุฌุฑุงุกุงุช**:
1. ุงุฐูุจ ุฅูู: `http://localhost:3000/approvals/pending`
2. ูุฌุจ ุฃู ูุธูุฑ ุงูุทูุจ ูู ุงููุงุฆูุฉ
3. ุงุถุบุท "ููุงูู"
4. ุงููุฃ ุงูููุงุช: `Approved by Finance Manager - Test`
5. ุงุถุบุท "ุชุฃููุฏ ุงูููุงููุฉ"

**ุงูุชุญูู**:
- [ ] ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ
- [ ] ุงูุทูุจ ูุฎุชูู ูู ูุงุฆูุฉ ุงูููุงููุงุช ุงููุนููุฉ

**ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
```sql
SELECT created_id, status FROM tasks_requests WHERE request_code = 'REQ-XXXXX';
-- ุงููุชููุน: created_id = '5cc044daa6bca06b' (hassn)
```

**ุชุณุฌูู ุงููุชุงุฆุฌ**:
```
โ Approval created: Approved
โ created_id changed to: hassn (5cc044daa6bca06b)
```

---

### 4๏ธโฃ ุงูููุงููุฉ ูู ุงููุฏูุฑ ุงูุนุงู (2 ุฏูููุฉ)

```bash
# ุณุฌูู ุฎุฑูุฌ ูุณุฌูู ุฏุฎูู ุจุญุณุงุจ ุงููุฏูุฑ ุงูุนุงู
Username: hassn
Password: 102030
```

**ุงูุฅุฌุฑุงุกุงุช**:
1. ุงุฐูุจ ุฅูู: `http://localhost:3000/approvals/pending`
2. ูุฌุจ ุฃู ูุธูุฑ ุงูุทูุจ ูู ุงููุงุฆูุฉ
3. ุงุถุบุท "ููุงูู"
4. ุงููุฃ ุงูููุงุช: `Final approval by General Manager - Test`
5. ุงุถุบุท "ุชุฃููุฏ ุงูููุงููุฉ"

**ุงูุชุญูู**:
- [ ] ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ
- [ ] ุงูุทูุจ ูุฎุชูู ูู ูุงุฆูุฉ ุงูููุงููุงุช ุงููุนููุฉ

**ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
```sql
-- ุงูุชุญูู ูู tasks_requests
SELECT created_id, status FROM tasks_requests WHERE request_code = 'REQ-XXXXX';
-- ุงููุชููุน: status = 'Complete'

-- ุงูุชุญูู ูู clients
SELECT name, status FROM clients WHERE name LIKE 'QA Test Client%';
-- ุงููุชููุน: status = 'Active'
```

**ุชุณุฌูู ุงููุชุงุฆุฌ**:
```
โ Approval created: Approved
โ tasks_requests.status = Complete
โ clients.status = Active
```

---

### 5๏ธโฃ ุงูุชุญูู ูู Timeline (2 ุฏูููุฉ)

**ุงูุฅุฌุฑุงุกุงุช**:
1. ุงุฐูุจ ุฅูู: `http://localhost:3000/requests/clients/timeline?id={request_id}`
2. ุฑุงุฌุน Timeline

**ุงูุชุญูู**:
- [ ] ูุฌุจ ุฃู ุชุธูุฑ 3 ููุงููุงุช (ุฃู ุฃูุซุฑ)
- [ ] ุงูููุงููุฉ ุงูุฃููู: Approved (ุฃุฎุถุฑ) - ูุฏูุฑ ุงูุนููุฏ
- [ ] ุงูููุงููุฉ ุงูุซุงููุฉ: Approved (ุฃุฎุถุฑ) - ูุฏูุฑ ุงููุงููุฉ
- [ ] ุงูููุงููุฉ ุงูุซุงูุซุฉ: Approved (ุฃุฎุถุฑ) - ุงููุฏูุฑ ุงูุนุงู
- [ ] ุงูููุงุช ุชุธูุฑ ููู ููุงููุฉ

**ุชุณุฌูู ุงููุชุงุฆุฌ**:
```
โ Timeline displays correctly
โ All approvals shown with correct status
โ Remarks visible for each approval
```

---

## ๐ ุชูุฑูุฑ ุงูุงุฎุชุจุงุฑ

### ุงููุชูุฌุฉ ุงูุฅุฌูุงููุฉ:

| ุงูุฎุทูุฉ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|-----------|
| ุฅูุดุงุก ุทูุจ | โ/โ | |
| ููุงููุฉ ูุฏูุฑ ุงูุนููุฏ | โ/โ | |
| ููุงููุฉ ูุฏูุฑ ุงููุงููุฉ | โ/โ | |
| ููุงููุฉ ุงููุฏูุฑ ุงูุนุงู | โ/โ | |
| Timeline | โ/โ | |

### ุงููุดุงูู ุงูููุชุดูุฉ:

```
1. [ูุตู ุงููุดููุฉ]
   - ุงูุฎุทูุฉ: [ุฑูู ุงูุฎุทูุฉ]
   - ุงูุฎุทุฃ: [ูุตู ุงูุฎุทุฃ]
   - ุงูุญู: [ุงูุญู ุงูููุชุฑุญ]

2. [ูุตู ุงููุดููุฉ]
   ...
```

### ุงูุชูุตูุงุช:

```
1. [ุชูุตูุฉ 1]
2. [ุชูุตูุฉ 2]
...
```

---

## ๐ ุงุฎุชุจุงุฑุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)

### ุงุฎุชุจุงุฑ ุงูุฑูุถ:

1. ุฃูุดุฆ ุทูุจ ุฌุฏูุฏ
2. ูุงูู ูู ูุฏูุฑ ุงูุนููุฏ
3. ุงุฑูุถ ูู ูุฏูุฑ ุงููุงููุฉ
4. ุชุญูู ูู ุฅุฑุฌุงุน `created_id` ุฅูู ูุฏูุฑ ุงูุนููุฏ

### ุงุฎุชุจุงุฑ Validation:

1. ุงุถุบุท "Reject" ุจุฏูู ููุก ุงูููุงุช
2. ุชุญูู ูู ุฑุณุงูุฉ ุงูุฎุทุฃ
3. ุชุญูู ูู ุชุนุทูู ุฒุฑ "ุชุฃููุฏ ุงูุฑูุถ"

---

**ุชุงุฑูุฎ ุงูุงุฎุชุจุงุฑ**: _______________
**ุงููุฎุชุจุฑ**: _______________
**ุงููุชูุฌุฉ ุงูููุงุฆูุฉ**: โ Pass / โ Fail

